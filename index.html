<html>
  <head>
    <script src="d3.min.js" type="text/javascript"></script>
    <style>
      #input div {
        float: left;
        display: inline;
        padding: 10px;
      }
      h1, h2 {
        width: 100%;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <h1>Routes FSM with NFA simulation</h1>
    <h2>
      <a href="https://github.com/tenderlove/fsmjs/tree/gh-pages">
        Fix me!
      </a>
    </h2>
    <div class='chart' id='chart-2'>
<svg viewBox="0.00 0.00 1368.00 362.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph1" class="graph" transform="scale(1 1) rotate(0) translate(4 358)">
<title>nfa</title>
<polygon fill="white" stroke="white" points="-4,5 -4,-358 1365,-358 1365,5 -4,5"/>
<g id="graph2" class="cluster"><title>cluster_fsm</title>
<polygon fill="none" stroke="blue" points="8,-86 8,-310 1172,-310 1172,-86 8,-86"/>
<text text-anchor="middle" x="590" y="-293.4" font-family="Times,serif" font-size="14.00">State Machine</text>
</g>
<!-- 2 -->
<g id="node2" class="node"><title>2</title>
<ellipse fill="none" stroke="black" cx="226" cy="-116" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="226" cy="-116" rx="22" ry="22"/>
<text text-anchor="middle" x="226" y="-111.8" font-family="Times,serif" font-size="14.00">2</text>
</g>
<!-- 3 -->
<g id="node15" class="node"><title>3</title>
<ellipse fill="none" stroke="black" cx="306" cy="-116" rx="18" ry="18"/>
<text text-anchor="middle" x="306" y="-111.8" font-family="Times,serif" font-size="14.00">3</text>
</g>
<!-- 2&#45;&gt;3 -->
<g id="edge7" class="edge"><title>2&#45;&gt;3</title>
<path fill="none" stroke="black" d="M248.314,-116C257.359,-116 268.015,-116 277.631,-116"/>
<polygon fill="black" stroke="black" points="277.907,-119.5 287.907,-116 277.907,-112.5 277.907,-119.5"/>
<text text-anchor="middle" x="268" y="-120.2" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 4 -->
<g id="node17" class="node"><title>4</title>
<ellipse fill="none" stroke="black" cx="306" cy="-178" rx="18" ry="18"/>
<text text-anchor="middle" x="306" y="-173.8" font-family="Times,serif" font-size="14.00">4</text>
</g>
<!-- 2&#45;&gt;4 -->
<g id="edge9" class="edge"><title>2&#45;&gt;4</title>
<path fill="none" stroke="black" d="M243.925,-129.453C255.501,-138.655 270.947,-150.933 283.409,-160.838"/>
<polygon fill="black" stroke="black" points="281.47,-163.768 291.476,-167.25 285.826,-158.288 281.47,-163.768"/>
<text text-anchor="middle" x="268" y="-153.2" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 70157363934220 -->
<g id="node33" class="node"><title>70157363934220</title>
<polygon fill="none" stroke="black" points="636.341,-36 527.659,-36 527.659,-0 642.341,-0 642.341,-30 636.341,-36"/>
<polyline fill="none" stroke="black" points="636.341,-36 636.341,-30 "/>
<polyline fill="none" stroke="black" points="642.341,-30 636.341,-30 "/>
<text text-anchor="middle" x="585" y="-13.8" font-family="Times,serif" font-size="14.00">/articles(.:format)</text>
</g>
<!-- 2&#45;&gt;70157363934220 -->
<g id="edge33" class="edge"><title>2&#45;&gt;70157363934220</title>
<path fill="none" stroke="black" d="M246.148,-106.45C257.991,-100.816 273.628,-93.8596 288,-89 365.417,-62.8232 457.313,-42.3638 517.947,-30.2663"/>
<polygon fill="black" stroke="black" points="518.643,-33.6965 527.775,-28.3241 517.286,-26.8293 518.643,-33.6965"/>
</g>
<!-- 5 -->
<g id="node3" class="node"><title>5</title>
<ellipse fill="none" stroke="black" cx="466" cy="-116" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="466" cy="-116" rx="22" ry="22"/>
<text text-anchor="middle" x="466" y="-111.8" font-family="Times,serif" font-size="14.00">5</text>
</g>
<!-- 5&#45;&gt;70157363934220 -->
<g id="edge35" class="edge"><title>5&#45;&gt;70157363934220</title>
<path fill="none" stroke="black" d="M481.079,-99.5965C483.502,-96.4917 485.91,-93.2091 488,-90 497.545,-75.3418 493.434,-67.1688 506,-55 511.404,-49.7671 517.686,-45.1639 524.296,-41.1447"/>
<polygon fill="black" stroke="black" points="526.439,-43.9564 533.459,-36.0215 523.023,-37.8465 526.439,-43.9564"/>
</g>
<!-- 6 -->
<g id="node4" class="node"><title>6</title>
<ellipse fill="none" stroke="black" cx="466" cy="-178" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="466" cy="-178" rx="22" ry="22"/>
<text text-anchor="middle" x="466" y="-173.8" font-family="Times,serif" font-size="14.00">6</text>
</g>
<!-- 8 -->
<g id="node20" class="node"><title>8</title>
<ellipse fill="none" stroke="black" cx="585" cy="-133" rx="18" ry="18"/>
<text text-anchor="middle" x="585" y="-128.8" font-family="Times,serif" font-size="14.00">8</text>
</g>
<!-- 6&#45;&gt;8 -->
<g id="edge13" class="edge"><title>6&#45;&gt;8</title>
<path fill="none" stroke="black" d="M485.828,-168.337C492.162,-165.245 499.317,-161.921 506,-159.2 522.985,-152.285 542.55,-145.717 557.836,-140.887"/>
<polygon fill="black" stroke="black" points="559.139,-144.147 567.65,-137.837 557.062,-137.462 559.139,-144.147"/>
<text text-anchor="middle" x="508" y="-164.2" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 70157363931060 -->
<g id="node34" class="node"><title>70157363931060</title>
<polygon fill="none" stroke="black" points="987.553,-78 852.447,-78 852.447,-42 993.553,-42 993.553,-72 987.553,-78"/>
<polyline fill="none" stroke="black" points="987.553,-78 987.553,-72 "/>
<polyline fill="none" stroke="black" points="993.553,-72 987.553,-72 "/>
<text text-anchor="middle" x="923" y="-55.8" font-family="Times,serif" font-size="14.00">/articles/new(.:format)</text>
</g>
<!-- 6&#45;&gt;70157363931060 -->
<g id="edge37" class="edge"><title>6&#45;&gt;70157363931060</title>
<path fill="none" stroke="black" d="M479.62,-160.287C493.658,-141.134 515.943,-112.463 528,-106 626.616,-53.1368 758.758,-48.8455 842.148,-52.7657"/>
<polygon fill="black" stroke="black" points="842.154,-56.2706 852.322,-53.2962 842.518,-49.2801 842.154,-56.2706"/>
</g>
<!-- 7 -->
<g id="node5" class="node"><title>7</title>
<ellipse fill="none" stroke="black" cx="466" cy="-242" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="466" cy="-242" rx="22" ry="22"/>
<text text-anchor="middle" x="466" y="-237.8" font-family="Times,serif" font-size="14.00">7</text>
</g>
<!-- 9 -->
<g id="node22" class="node"><title>9</title>
<ellipse fill="none" stroke="black" cx="585" cy="-192" rx="18" ry="18"/>
<text text-anchor="middle" x="585" y="-187.8" font-family="Times,serif" font-size="14.00">9</text>
</g>
<!-- 7&#45;&gt;9 -->
<g id="edge15" class="edge"><title>7&#45;&gt;9</title>
<path fill="none" stroke="black" d="M484.319,-229.654C490.897,-225.326 498.593,-220.682 506,-217.2 522.533,-209.428 542.099,-203.114 557.499,-198.75"/>
<polygon fill="black" stroke="black" points="558.68,-202.055 567.406,-196.046 556.837,-195.302 558.68,-202.055"/>
<text text-anchor="middle" x="508" y="-222.2" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 10 -->
<g id="node24" class="node"><title>10</title>
<ellipse fill="none" stroke="black" cx="585" cy="-250" rx="20.8887" ry="20.8887"/>
<text text-anchor="middle" x="585" y="-245.8" font-family="Times,serif" font-size="14.00">10</text>
</g>
<!-- 7&#45;&gt;10 -->
<g id="edge17" class="edge"><title>7&#45;&gt;10</title>
<path fill="none" stroke="black" d="M488.006,-238.936C493.821,-238.219 500.144,-237.559 506,-237.2 522.312,-236.2 540.328,-238.901 554.932,-242.075"/>
<polygon fill="black" stroke="black" points="554.354,-245.535 564.89,-244.424 555.961,-238.722 554.354,-245.535"/>
<text text-anchor="middle" x="508" y="-242.2" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 70157368139280 -->
<g id="node35" class="node"><title>70157368139280</title>
<polygon fill="none" stroke="black" points="983.512,-354 856.488,-354 856.488,-318 989.512,-318 989.512,-348 983.512,-354"/>
<polyline fill="none" stroke="black" points="983.512,-354 983.512,-348 "/>
<polyline fill="none" stroke="black" points="989.512,-348 983.512,-348 "/>
<text text-anchor="middle" x="923" y="-331.8" font-family="Times,serif" font-size="14.00">/articles/:id(.:format)</text>
</g>
<!-- 7&#45;&gt;70157368139280 -->
<g id="edge39" class="edge"><title>7&#45;&gt;70157368139280</title>
<path fill="none" stroke="black" d="M483.935,-254.838C495.681,-263.076 512.028,-273.27 528,-279 634.214,-317.104 765.205,-329.79 846.168,-333.98"/>
<polygon fill="black" stroke="black" points="846.118,-337.482 856.276,-334.473 846.458,-330.49 846.118,-337.482"/>
</g>
<!-- 11 -->
<g id="node6" class="node"><title>11</title>
<ellipse fill="none" stroke="black" cx="787" cy="-119" rx="20.8568" ry="20.8568"/>
<ellipse fill="none" stroke="black" cx="787" cy="-119" rx="24.8884" ry="24.8884"/>
<text text-anchor="middle" x="787" y="-114.8" font-family="Times,serif" font-size="14.00">11</text>
</g>
<!-- 11&#45;&gt;70157363931060 -->
<g id="edge41" class="edge"><title>11&#45;&gt;70157363931060</title>
<path fill="none" stroke="black" d="M808.151,-105.815C820.462,-98.1534 836.727,-88.7171 852,-82 852.095,-81.9583 852.19,-81.9167 852.285,-81.8751"/>
<polygon fill="black" stroke="black" points="853.448,-85.1813 861.361,-78.1363 850.782,-78.7088 853.448,-85.1813"/>
</g>
<!-- 12 -->
<g id="node7" class="node"><title>12</title>
<ellipse fill="none" stroke="black" cx="787" cy="-186" rx="20.8568" ry="20.8568"/>
<ellipse fill="none" stroke="black" cx="787" cy="-186" rx="24.8884" ry="24.8884"/>
<text text-anchor="middle" x="787" y="-181.8" font-family="Times,serif" font-size="14.00">12</text>
</g>
<!-- 14 -->
<g id="node27" class="node"><title>14</title>
<ellipse fill="none" stroke="black" cx="923" cy="-199" rx="20.8887" ry="20.8887"/>
<text text-anchor="middle" x="923" y="-194.8" font-family="Times,serif" font-size="14.00">14</text>
</g>
<!-- 12&#45;&gt;14 -->
<g id="edge21" class="edge"><title>12&#45;&gt;14</title>
<path fill="none" stroke="black" d="M811.982,-184.795C817.872,-184.548 824.163,-184.325 830,-184.2 851.227,-183.745 874.869,-187.647 892.871,-191.557"/>
<polygon fill="black" stroke="black" points="892.228,-195.001 902.758,-193.828 893.795,-188.178 892.228,-195.001"/>
<text text-anchor="middle" x="832" y="-189.2" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 70157368141420 -->
<g id="node36" class="node"><title>70157368141420</title>
<polygon fill="none" stroke="black" points="1353.9,-186 1202.1,-186 1202.1,-150 1359.9,-150 1359.9,-180 1353.9,-186"/>
<polyline fill="none" stroke="black" points="1353.9,-186 1353.9,-180 "/>
<polyline fill="none" stroke="black" points="1359.9,-180 1353.9,-180 "/>
<text text-anchor="middle" x="1281" y="-163.8" font-family="Times,serif" font-size="14.00">/articles/:id/edit(.:format)</text>
</g>
<!-- 12&#45;&gt;70157368141420 -->
<g id="edge43" class="edge"><title>12&#45;&gt;70157368141420</title>
<path fill="none" stroke="black" d="M810.523,-178.506C822.66,-174.854 837.982,-170.857 852,-169 968.736,-153.534 1104.96,-156.833 1191.81,-161.591"/>
<polygon fill="black" stroke="black" points="1191.7,-165.091 1201.89,-162.162 1192.1,-158.102 1191.7,-165.091"/>
</g>
<!-- 13 -->
<g id="node8" class="node"><title>13</title>
<ellipse fill="none" stroke="black" cx="787" cy="-253" rx="20.8568" ry="20.8568"/>
<ellipse fill="none" stroke="black" cx="787" cy="-253" rx="24.8884" ry="24.8884"/>
<text text-anchor="middle" x="787" y="-248.8" font-family="Times,serif" font-size="14.00">13</text>
</g>
<!-- 13&#45;&gt;70157368139280 -->
<g id="edge45" class="edge"><title>13&#45;&gt;70157368139280</title>
<path fill="none" stroke="black" d="M803.35,-271.644C813.935,-283.542 829.012,-298.751 850.335,-312.479"/>
<polygon fill="black" stroke="black" points="848.8,-315.642 859.161,-317.856 852.442,-309.664 848.8,-315.642"/>
</g>
<!-- 15 -->
<g id="node9" class="node"><title>15</title>
<ellipse fill="none" stroke="black" cx="1139" cy="-202" rx="20.8568" ry="20.8568"/>
<ellipse fill="none" stroke="black" cx="1139" cy="-202" rx="24.8884" ry="24.8884"/>
<text text-anchor="middle" x="1139" y="-197.8" font-family="Times,serif" font-size="14.00">15</text>
</g>
<!-- 15&#45;&gt;70157368141420 -->
<g id="edge47" class="edge"><title>15&#45;&gt;70157368141420</title>
<path fill="none" stroke="black" d="M1163.12,-196.386C1172.49,-194.109 1183.95,-191.327 1195.98,-188.406"/>
<polygon fill="black" stroke="black" points="1196.83,-191.801 1205.72,-186.04 1195.17,-184.999 1196.83,-191.801"/>
</g>
<!-- 0 -->
<g id="node10" class="node"><title>0</title>
<ellipse fill="none" stroke="black" cx="34" cy="-116" rx="18" ry="18"/>
<text text-anchor="middle" x="34" y="-111.8" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- 1 -->
<g id="node12" class="node"><title>1</title>
<ellipse fill="none" stroke="black" cx="110" cy="-116" rx="18" ry="18"/>
<text text-anchor="middle" x="110" y="-111.8" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- 0&#45;&gt;1 -->
<g id="edge3" class="edge"><title>0&#45;&gt;1</title>
<path fill="none" stroke="black" d="M52.1631,-116C60.9425,-116 71.8374,-116 81.7325,-116"/>
<polygon fill="black" stroke="black" points="81.93,-119.5 91.93,-116 81.93,-112.5 81.93,-119.5"/>
<text text-anchor="middle" x="72" y="-120.2" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge5" class="edge"><title>1&#45;&gt;2</title>
<path fill="none" stroke="black" d="M128.314,-116C145.578,-116 172.486,-116 193.536,-116"/>
<polygon fill="black" stroke="black" points="193.629,-119.5 203.629,-116 193.629,-112.5 193.629,-119.5"/>
<text text-anchor="middle" x="166" y="-120.2" font-family="Times,serif" font-size="14.00">articles</text>
</g>
<!-- 3&#45;&gt;5 -->
<g id="edge23" class="edge"><title>3&#45;&gt;5</title>
<path fill="none" stroke="black" d="M324.21,-116C350.366,-116 400.548,-116 433.393,-116"/>
<polygon fill="black" stroke="black" points="433.807,-119.5 443.807,-116 433.807,-112.5 433.807,-119.5"/>
<text text-anchor="middle" x="384" y="-120.2" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 4&#45;&gt;6 -->
<g id="edge11" class="edge"><title>4&#45;&gt;6</title>
<path fill="none" stroke="black" d="M324.21,-178C350.366,-178 400.548,-178 433.393,-178"/>
<polygon fill="black" stroke="black" points="433.807,-181.5 443.807,-178 433.807,-174.5 433.807,-181.5"/>
<text text-anchor="middle" x="384" y="-182.2" font-family="Times,serif" font-size="14.00">new</text>
</g>
<!-- 4&#45;&gt;7 -->
<g id="edge25" class="edge"><title>4&#45;&gt;7</title>
<path fill="none" stroke="black" d="M321.684,-187.156C327.832,-190.787 335.134,-194.84 342,-198 372.782,-212.167 409.532,-224.786 434.797,-232.837"/>
<polygon fill="black" stroke="black" points="433.952,-236.24 444.541,-235.897 436.049,-229.561 433.952,-236.24"/>
<text text-anchor="middle" x="384" y="-234.2" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 8&#45;&gt;11 -->
<g id="edge27" class="edge"><title>8&#45;&gt;11</title>
<path fill="none" stroke="black" d="M603.052,-131.806C636.039,-129.497 709.134,-124.381 752.28,-121.36"/>
<polygon fill="black" stroke="black" points="752.572,-124.849 762.303,-120.659 752.083,-117.866 752.572,-124.849"/>
<text text-anchor="middle" x="702" y="-132.2" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 9&#45;&gt;12 -->
<g id="edge19" class="edge"><title>9&#45;&gt;12</title>
<path fill="none" stroke="black" d="M603.052,-191.488C636.039,-190.499 709.134,-188.306 752.28,-187.012"/>
<polygon fill="black" stroke="black" points="752.412,-190.509 762.303,-186.711 752.202,-183.512 752.412,-190.509"/>
<text text-anchor="middle" x="702" y="-194.2" font-family="Times,serif" font-size="14.00">edit</text>
</g>
<!-- 10&#45;&gt;13 -->
<g id="edge29" class="edge"><title>10&#45;&gt;13</title>
<path fill="none" stroke="black" d="M606.013,-247.479C636.061,-244.098 694.582,-239.078 744,-244.2 746.848,-244.495 749.788,-244.9 752.728,-245.375"/>
<polygon fill="black" stroke="black" points="752.118,-248.822 762.589,-247.203 753.394,-241.939 752.118,-248.822"/>
<text text-anchor="middle" x="702" y="-249.2" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 14&#45;&gt;15 -->
<g id="edge31" class="edge"><title>14&#45;&gt;15</title>
<path fill="none" stroke="black" d="M943.749,-199.277C980.246,-199.788 1058.65,-200.888 1103.9,-201.522"/>
<polygon fill="black" stroke="black" points="1104.05,-205.024 1114.1,-201.665 1104.15,-198.025 1104.05,-205.024"/>
<text text-anchor="middle" x="1054" y="-206.2" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
</g>
</svg>
</div>
    <script src="fsm.js" type="text/javascript"></script>
    <div id="input">
      <div>
        <form onsubmit="return match(this.route.value);">
          <input type="text" size="30" name="route" value="/articles/new" />
          <button>simulate</button>
          <input type="reset" value="reset" onclick="return reset_graph();"/>
        </form>
      </div>
      <div>
        This is a FSM for a system that has the following routes:
        <ul>
          <li>/articles(.:format)</li>
          <li>/articles/new(.:format)</li>
          <li>/articles/:id/edit(.:format)</li>
          <li>/articles/:id(.:format)</li>
        </ul>
        Type a route in to the box and click "simulate".  Some fun routes to try:
        <ul>
          <li>
            <a href="#" onclick="document.forms[0].elements[0].value=this.text.replace(/^\s+|\s+$/g,''); return match(this.text.replace(/^\s+|\s+$/g,''));">
              /articles
            </a>
          </li>
          <li>
            <a href="#" onclick="document.forms[0].elements[0].value=this.text.replace(/^\s+|\s+$/g,''); return match(this.text.replace(/^\s+|\s+$/g,''));">
              /articles/10/edit.json
            </a>
          </li>
          <li>
            <a href="#" onclick="document.forms[0].elements[0].value=this.text.replace(/^\s+|\s+$/g,''); return match(this.text.replace(/^\s+|\s+$/g,''));">
              /articles/new.
            </a>
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
